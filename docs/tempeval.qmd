---
title: "OTB temperature logger deployments"
author: 
   - name: Marcus Beck, <mbeck@tbep.org>, Sheila Scolaro, <sscolaro@tbep.org>
institute: "Tampa Bay Estuary Program"
date: "`r Sys.Date()`"
format:
  html:
    theme: cosmo
    css: styles.css
    code-tools: 
      source: https://github.com/tbep-tech/otb-temp/blob/main/docs/tempeval.qmd
execute:
  echo: false
  warning: false
filters:
  - lightbox
  
lightbox: auto
---

```{r}
#| include: false
library(knitr)
library(here)
library(tidyverse)
library(plotly)
library(mapview)

load(file = here('data/metadat.RData'))
load(file = here('data/tempdat.RData'))
```

::: {.panel-tabset}

## 2022

```{r}
p <- tempdat %>% 
  filter(yr == 2022) %>% 
  ggplot(aes(x = datetime, y = tempc, color = site)) + 
  geom_line() + 
  theme_minimal() + 
  scale_color_viridis_d() +
  theme(
    panel.grid.minor = element_blank(), 
    legend.position  = 'top'
  ) +
  labs(
    y = 'Temp (C)',
    x = NULL, 
    color = 'Site'
  )
ggplotly(p)
```

```{r}
metadat %>% 
  filter(yr == 2022) %>% 
  mapview(zcol = 'site', layer.name = 'Site')
```

## 2023

```{r}
p <- tempdat %>% 
  filter(yr == 2023) %>% 
  ggplot(aes(x = datetime, y = tempc, color = site)) + 
  geom_line() + 
  theme_minimal() + 
  scale_color_viridis_d() +
  theme(
    panel.grid.minor = element_blank(), 
    legend.position  = 'top'
  ) +
  labs(
    y = 'Temp (C)',
    x = NULL, 
    color = 'Site'
  )
ggplotly(p)
```

```{r}
metadat %>% 
  filter(yr == 2023) %>% 
  mapview(zcol = 'site', layer.name = 'Site')
```

:::